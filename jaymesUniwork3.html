<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignments</title>
    <style>
        .hidden {
            display: none;
        }
        .pdf-container {
            margin-top: 20px;
        }
        iframe {
            width: 100%;
            height: 400px;
        }
    </style>
    <script>
        const uploadPassword = "5588"; // Set the password here

        function savePdfLink(assignmentId) {
            const passwordInput = document.getElementById(`passwordInput-${assignmentId}`).value;
            if (passwordInput !== uploadPassword) {
                alert('Incorrect password. Upload denied.');
                return;
            }

            const pdfInput = document.getElementById(`pdfInput-${assignmentId}`);
            const file = pdfInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    localStorage.setItem(`assignment-${assignmentId}`, e.target.result);
                    alert('PDF linked successfully!');
                    loadPdfLinks(); // Refresh the links after saving
                };
                reader.readAsDataURL(file);
            }
        }

        function loadPdfLinks() {
            const assignments = document.querySelectorAll('.assignment');
            assignments.forEach(assignment => {
                const id = assignment.dataset.id;
                const link = localStorage.getItem(`assignment-${id}`);
                const linkContainer = assignment.querySelector('.link-container');
                linkContainer.innerHTML = ''; // Clear previous links
                
                if (link) {
                    const linkElement = document.createElement('a');
                    linkElement.href = link;
                    linkElement.textContent = 'View PDF';
                    linkElement.target = '_blank';
                    linkContainer.appendChild(linkElement);
                    
                    const viewButton = document.createElement('button');
                    viewButton.textContent = 'View Assignment';
                    viewButton.onclick = function() {
                        viewAssignment(id);
                    };
                    linkContainer.appendChild(viewButton);
                }
            });
        }

        function viewAssignment(id) {
            const link = localStorage.getItem(`assignment-${id}`);
            if (link) {
                const pdfFrame = document.getElementById('pdfFrame');
                pdfFrame.src = link;
                const pdfContainer = document.getElementById('pdfContainer');
                pdfContainer.dataset.id = id;
                pdfContainer.classList.remove('hidden');
            }
        }

        function deletePdfLink() {
            const pdfContainer = document.getElementById('pdfContainer');
            const assignmentId = pdfContainer.dataset.id;
            localStorage.removeItem(`assignment-${assignmentId}`);
            alert('PDF link deleted successfully!');
            pdfContainer.classList.add('hidden');
            loadPdfLinks();
        }

        function togglePasswordVisibility(assignmentId) {
            const passwordInput = document.getElementById(`passwordInput-${assignmentId}`);
            const toggleButton = document.getElementById(`togglePassword-${assignmentId}`);
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleButton.textContent = "Hide";
            } else {
                passwordInput.type = "password";
                toggleButton.textContent = "Show";
            }
        }

        document.addEventListener('DOMContentLoaded', loadPdfLinks);
    </script>
</head>
<body>
    <h1>Assignments</h1>
    <div class="assignment" data-id="1">
        <h2>Assignment 1</h2>
        <input type="file" id="pdfInput-1" accept="application/pdf">
        <input type="password" id="passwordInput-1" placeholder="Enter password">
        <button id="togglePassword-1" onclick="togglePasswordVisibility(1)">Show</button>
        <button onclick="savePdfLink(1)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <div class="assignment" data-id="2">
        <h2>Assignment 2</h2>
        <input type="file" id="pdfInput-2" accept="application/pdf">
        <input type="password" id="passwordInput-2" placeholder="Enter password">
        <button id="togglePassword-2" onclick="togglePasswordVisibility(2)">Show</button>
        <button onclick="savePdfLink(2)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <!-- Add more assignments as needed -->

    <div id="pdfContainer" class="pdf-container hidden">
        <h2>Assignment Details</h2>
        <iframe id="pdfFrame"></iframe>
        <br>
        <button onclick="deletePdfLink()">Delete PDF</button>
    </div>
</body>
</html>
