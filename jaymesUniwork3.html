<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignments</title>
    <style>
        body {
            background: linear-gradient(45deg, darkblue, purple);
            color: yellow;
            font-family: Arial, sans-serif;
        }
        #header {
            text-align: right;
            padding: 10px;
            font-size: 1.5em;
        }
        .assignment {
            margin: 20px;
        }
        .assignment button {
            background-color: yellow;
            color: darkblue;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        .pdf-container {
            margin-top: 20px;
        }
        iframe {
            width: 100%;
            height: 400px;
        }
    </style>
    <script>
        const uploadPassword = "5588"; // Set the password here

        function savePdfLink(assignmentId) {
            const passwordInput = document.getElementById(`passwordInput-${assignmentId}`).value;
            if (passwordInput !== uploadPassword) {
                alert('Incorrect password. Upload denied.');
                return;
            }

            const pdfInput = document.getElementById(`pdfInput-${assignmentId}`);
            const files = pdfInput.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                reader.onload = function(e) {
                    let storedFiles = JSON.parse(localStorage.getItem(`assignment-${assignmentId}`)) || [];
                    storedFiles.push({ name: file.name, data: e.target.result });
                    localStorage.setItem(`assignment-${assignmentId}`, JSON.stringify(storedFiles));
                    alert('PDF linked successfully!');
                    loadPdfLinks(); // Refresh the links after saving
                };
                reader.readAsDataURL(file);
            }
        }

        function loadPdfLinks() {
            const assignments = document.querySelectorAll('.assignment');
            assignments.forEach(assignment => {
                const id = assignment.dataset.id;
                const storedFiles = JSON.parse(localStorage.getItem(`assignment-${id}`)) || [];
                const linkContainer = assignment.querySelector('.link-container');
                linkContainer.innerHTML = ''; // Clear previous links
                
                storedFiles.forEach((file, index) => {
                    const linkElement = document.createElement('a');
                    linkElement.href = file.data;
                    linkElement.textContent = file.name;
                    linkElement.target = '_blank';
                    linkContainer.appendChild(linkElement);
                    
                    const viewButton = document.createElement('button');
                    viewButton.textContent = `View ${file.name}`;
                    viewButton.onclick = function() {
                        viewAssignment(id, index);
                    };
                    linkContainer.appendChild(viewButton);
                });
            });
        }

        function viewAssignment(id, fileIndex) {
            const storedFiles = JSON.parse(localStorage.getItem(`assignment-${id}`)) || [];
            const file = storedFiles[fileIndex];
            if (file) {
                const pdfFrame = document.getElementById('pdfFrame');
                pdfFrame.src = file.data;
                const pdfContainer = document.getElementById('pdfContainer');
                pdfContainer.dataset.id = id;
                pdfContainer.dataset.index = fileIndex;
                pdfContainer.classList.remove('hidden');
                document.getElementById('fileName').textContent = file.name;
            }
        }

        function deletePdfLink() {
            const pdfContainer = document.getElementById('pdfContainer');
            const assignmentId = pdfContainer.dataset.id;
            const fileIndex = Number(pdfContainer.dataset.index);
            let storedFiles = JSON.parse(localStorage.getItem(`assignment-${assignmentId}`)) || [];
            storedFiles.splice(fileIndex, 1);
            localStorage.setItem(`assignment-${assignmentId}`, JSON.stringify(storedFiles));
            alert('PDF link deleted successfully!');
            pdfContainer.classList.add('hidden');
            loadPdfLinks();
        }

        function togglePasswordVisibility(assignmentId) {
            const passwordInput = document.getElementById(`passwordInput-${assignmentId}`);
            const toggleButton = document.getElementById(`togglePassword-${assignmentId}`);
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleButton.textContent = "Hide";
            } else {
                passwordInput.type = "password";
                toggleButton.textContent = "Show";
            }
        }

        document.addEventListener('DOMContentLoaded', loadPdfLinks);
    </script>
</head>
<body>
    <div id="header">Jaymes Cardoso Ake</div>
    <h1>Assignments</h1>
    <div class="assignment" data-id="1">
        <h2>Assignment 1</h2>
        <input type="file" id="pdfInput-1" accept="application/pdf" multiple>
        <input type="password" id="passwordInput-1" placeholder="Enter password">
        <button id="togglePassword-1" onclick="togglePasswordVisibility(1)">Show</button>
        <button onclick="savePdfLink(1)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <div class="assignment" data-id="2">
        <h2>Assignment 2</h2>
        <input type="file" id="pdfInput-2" accept="application/pdf" multiple>
        <input type="password" id="passwordInput-2" placeholder="Enter password">
        <button id="togglePassword-2" onclick="togglePasswordVisibility(2)">Show</button>
        <button onclick="savePdfLink(2)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <div class="assignment" data-id="3">
        <h2>Assignment 3</h2>
        <input type="file" id="pdfInput-3" accept="application/pdf" multiple>
        <input type="password" id="passwordInput-3" placeholder="Enter password">
        <button id="togglePassword-3" onclick="togglePasswordVisibility(3)">Show</button>
        <button onclick="savePdfLink(3)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <div class="assignment" data-id="4">
        <h2>Assignment 4</h2>
        <input type="file" id="pdfInput-4" accept="application/pdf" multiple>
        <input type="password" id="passwordInput-4" placeholder="Enter password">
        <button id="togglePassword-4" onclick="togglePasswordVisibility(4)">Show</button>
        <button onclick="savePdfLink(4)">Link PDF</button>
        <div class="link-container"></div>
    </div>
    <div class="assignment" data-id="5">
        <h2>Assignment 5</h2>
        <input type="file" id="pdfInput-5" accept="application/pdf" multiple>
        <input type="password" id="passwordInput-5" placeholder="Enter password">
        <button id="togglePassword-5" onclick="togglePasswordVisibility(5)">Show</button>
        <button onclick="savePdfLink(5)">Link PDF</button>
        <div class="link-container"></div>
    </div>

    <div id="pdfContainer" class="pdf-container hidden">
        <h2>Assignment Details</h2>
        <p id="fileName"></p>
        <iframe id="pdfFrame"></iframe>
        <br>
        <button onclick="deletePdfLink()">Delete PDF</button>
    </div>
</body>
</html>
